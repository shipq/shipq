= Migration Design

We now want to integrate migrations into the CLI. The way this
should work is as follows:

1. The user types `shipq migrate new <migration_name>`, and that
creates a new migration file in the `migrations` package. The
migration should look like this:

```go
package migrations

import (
	"github.com/shipq/shipq/db/portsql/ddl"
	"github.com/shipq/shipq/db/portsql/migrate"
)

func Migrate_20260111170656_<migration_name>(plan *migrate.MigrationPlan) error {
	_, err := plan.AddTable("<migration_name>", func(tb *ddl.TableBuilder) error {
		return nil
	})
	return err
}
```

The user should be able to also specify some columns by default like:

```
name:string email:string x:int y:json
```

Which creates:

```
func Migrate_20260111170656_<migration_name>(plan *migrate.MigrationPlan) error {
	_, err := plan.AddTable("<migration_name>", func(tb *ddl.TableBuilder) error {
	  tb.String("name")
		tb.String("email")
	  tb.Int("x")
		tb.JSON("y")
		return nil
	})
	return err
}
```

Note that we should also support `references` as well using a Rails-like syntax.

This seems enough to start; we'll add `migrate up` next.
